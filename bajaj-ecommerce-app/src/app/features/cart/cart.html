<bajaj-nav-bar></bajaj-nav-bar>

<div class="container py-5">
  <h2 class="mb-4">Shopping Cart</h2>

  @if (cartItems.length === 0) {
    <div class="alert alert-info text-center">
      <p>Your cart is empty.</p>
      <a routerLink="/products" class="btn btn-primary">Continue Shopping</a>
    </div>
  } @else {
    <div class="table-responsive">
      <table class="table align-middle">
        <thead class="table-light">
          <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Total</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          @for (item of cartItems; track item.productId) {
            <tr>
              <td>
                <div class="d-flex align-items-center gap-3">
                  <img [src]="item.image" [alt]="item.name" width="60" height="60" class="rounded">
                  <div>
                    <h6 class="mb-0">{{item.name}}</h6>
                    @if (item.originalPrice && item.originalPrice > item.price) {
                      <small class="text-muted text-decoration-line-through">₹{{item.originalPrice.toFixed(2)}}</small>
                    }
                  </div>
                </div>
              </td>
              <td>₹{{item.price.toFixed(2)}}</td>
              <td>
                <div class="input-group input-group-sm" style="width: 120px;">
                  <button class="btn btn-outline-secondary" (click)="updateQuantity(item.productId, item.quantity - 1)">-</button>
                  <input type="text" class="form-control text-center" [value]="item.quantity" readonly>
                  <button class="btn btn-outline-secondary" (click)="updateQuantity(item.productId, item.quantity + 1)">+</button>
                </div>
              </td>
              <td>₹{{(item.price * item.quantity).toFixed(2)}}</td>
              <td>
                <button class="btn btn-sm btn-danger" (click)="removeItem(item.productId)">
                  <i class="bi bi-trash"></i>
                </button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <div class="row mt-4">
      <div class="col-md-6">
        <button class="btn btn-outline-danger" (click)="clearCart()">Clear Cart</button>
      </div>
      <div class="col-md-6 text-end">
        <h4>Grand Total: ₹{{getTotal().toFixed(2)}}</h4>
        <button 
          class="btn btn-success btn-lg" 
          (click)="checkout()"
          [disabled]="cartItems.length === 0">
          Proceed to Checkout
        </button>
      </div>
    </div>
  }
</div>

<bajaj-footer></bajaj-footer>